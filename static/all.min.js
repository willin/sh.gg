function ajax_cancel(){try{$.pjax.xhr&&$.pjax.xhr.abort()}catch(t){}$("#preloader").fadeOut()}function old_friend(){var t='<div id="reback">&#36825;&#31687;&#25991;&#31456;&#24744;&#24050;&#32463;&#30475;&#20102;&#22909;&#22810;&#36941;&#65292;&#19968;&#23450;&#21463;&#30410;&#21290;&#27973;&#21543;&#65311;</div>';(location.href==base_url||location.href+"/"==base_url)&&(t='<div id="reback">&#32769;&#26379;&#21451;&#65292;&#20320;&#21448;&#22238;&#26469;&#20102;&#12290;</div>'),$("#main").prepend(t),setTimeout(function(){$("#reback").remove()},5e3)}!function(t){var e={support:{pjax:window.history&&window.history.pushState&&window.history.replaceState&&!navigator.userAgent.match(/(iPod|iPhone|iPad|WebApps\/.+CFNetwork)/),storage:!!window.localStorage},toInt:function(t){return parseInt(t)},stack:{},getTime:function(){return 1*new Date},getRealUrl:function(t){return t=(t||"").replace(/\#.*?$/,""),t=t.replace("?pjax=true&","?").replace("?pjax=true","").replace("&pjax=true","")},getUrlHash:function(t){return t.replace(/^[^\#]*(?:\#(.*?))?$/,"$1")},getLocalKey:function(t){var e="pjax_"+encodeURIComponent(t);return{data:e+"_data",time:e+"_time",title:e+"_title"}},removeAllCache:function(){if(e.support.storage)for(var t in localStorage)"pjax"===(t.split("_")||[""])[0]&&delete localStorage[t]},getCache:function(t,o,a){var n,i,r,l;if(o=e.toInt(o),t in e.stack){if(n=e.stack[t],ctime=e.getTime(),n.time+1e3*o>ctime)return n;delete e.stack[t]}else if(a&&e.support.storage){var c=e.getLocalKey(t);if(i=c.data,r=c.time,n=localStorage.getItem(i)){if(l=e.toInt(localStorage.getItem(r)),l+1e3*o>e.getTime())return{data:n,title:localStorage.getItem(c.title)};localStorage.removeItem(i),localStorage.removeItem(r),localStorage.removeItem(c.title)}}return null},setCache:function(t,o,a,n){var i,r=e.getTime();e.stack[t]={data:o,title:a,time:r},n&&e.support.storage&&(i=e.getLocalKey(t),localStorage.setItem(i.data,o),localStorage.setItem(i.time,r),localStorage.setItem(i.title,a))},removeCache:function(t){if(t=e.getRealUrl(t||location.href),delete e.stack[t],e.support.storage){var o=e.getLocalKey(t);localStorage.removeItem(o.data),localStorage.removeItem(o.time),localStorage.removeItem(o.title)}}},o=function(a){if(a=t.extend({selector:"",container:"",callback:function(){},fitler:function(){}},a),!a.container||!a.selector)throw new Error("selector & container options must be set");t("body").delegate(a.selector,"click",function(n){if(n.which>1||n.metaKey)return!0;var i=t(this),r=i.attr("href");if("function"==typeof a.filter&&a.filter.call(this,r,this)===!0)return n.preventDefault(),!0;if(r===location.href)return!0;if(e.getRealUrl(r)==e.getRealUrl(location.href)){var l=e.getUrlHash(r);return l&&(t("html,body").animate({scrollTop:t("#"+l).offset().top},500),a.callback&&a.callback.call(this,{type:"hash"})),!0}n.preventDefault(),a=t.extend(!0,a,{url:r,element:this,title:"",push:!0}),o.request(a)})};o.xhr=null,o.options={},o.state={},o.defaultOptions={timeout:2e3,element:null,cache:86400,storage:!0,url:"",push:!0,show:"",title:"",titleSuffix:"",type:"GET",data:{pjax:!0},dataType:"html",callback:null,beforeSend:function(e){t(o.options.container).trigger("pjax.start",[e,o.options]),e&&e.setRequestHeader("X-PJAX",!0)},error:function(){o.options.callback&&o.options.callback.call(o.options.element,{type:"error",url:o.options.url})},complete:function(e){t(o.options.container).trigger("pjax.end",[e,o.options])}},o.showFx={_default:function(t,e,o){this.html(t),e&&e.call(this,t,o)},fade:function(t,e,o){var a=this;o?(a.html(t),e&&e.call(a,t,o)):this.fadeOut(500,function(){a.html(t).fadeIn(500,function(){e&&e.call(a,t,o)})})}},o.showFn=function(e,a,n,i,r){var l=null;"function"==typeof e?l=e:(e in o.showFx||(e="_default"),l=o.showFx[e]),l&&l.call(a,n,function(){var e=location.hash;""!=e?(t("html,body").animate({scrollTop:t(e).offset().top},500),/Firefox/.test(navigator.userAgent)&&history.replaceState(t.extend({},o.state,{url:null}),document.title)):t("html,body").animate({scrollTop:0},500),i&&i.call(this,n,r)},r)},o.success=function(a,n){n!==!0&&(n=!1);var i,r=o.options.title||"";o.options.element&&(i=t(o.options.element),r=i.attr("title")||i.text());var l=a.match(/<title>(.*?)<\ title>/);l&&(r=l[1]),r&&-1==r.indexOf(o.options.titleSuffix)&&(r+=o.options.titleSuffix),document.title=r,o.state={container:o.options.container,timeout:o.options.timeout,cache:o.options.cache,storage:o.options.storage,show:o.options.show,title:r,url:o.options.oldUrl};var c=t.param(o.options.data);""!=c&&(o.state.url=o.options.url+(/\?/.test(o.options.url)?"&":"?")+c),o.options.push?(o.active||(history.replaceState(t.extend({},o.state,{url:null}),document.title),o.active=!0),history.pushState(o.state,document.title,o.options.oldUrl)):o.options.push===!1&&history.replaceState(o.state,document.title,o.options.oldUrl),o.options.showFn&&o.options.showFn(a,function(){o.options.callback&&o.options.callback.call(o.options.element,{type:n?"cache":"success"})},n),o.options.cache&&!n&&e.setCache(o.options.url,a,r,o.options.storage)},o.request=function(a){a=t.extend(!0,o.defaultOptions,a);var n,i=t(a.container);return a.oldUrl=a.url,a.url=e.getRealUrl(a.url),t(a.element).length&&(n=e.toInt(t(a.element).attr("data-pjax-cache")),n&&(a.cache=n)),a.cache===!0&&(a.cache=86400),a.cache=e.toInt(a.cache),0===a.cache&&e.removeAllCache(),a.showFn||(a.showFn=function(t,e,n){o.showFn(a.show,i,t,e,n)}),o.options=a,o.options.success=o.success,a.cache&&(n=e.getCache(a.url,a.cache,a.storage))?(a.beforeSend(),a.title=n.title,o.success(n.data,!0),a.complete(),!0):(o.xhr&&o.xhr.readyState<4&&(o.xhr.onreadystatechange=t.noop,o.xhr.abort()),void(o.xhr=t.ajax(o.options)))};var a="state" in window.history,n="location.href;t(window).bind("popstate",function(e){var" i="!a&&location.href==n;if(a=!0,!i){var" r="e.state;if(r&&r.container)if(t(r.container).length){var" l="{url:r.url,container:r.container,push:null,timeout:r.timeout,cache:r.cache,storage:r.storage,title:r.title,element:null};o.request(l)}else" window.location="location.href}}),e.support.pjax||(o=function(){return!0},o.request=function(t){t&&t.url&&(location.href=t.url)}),t.pjax=o,t.pjax.util=e,t.inArray("state",t.event.props)<0&&t.event.props.push("state")}(jQuery),$(document).ready(function(){$.pjax({selector:"a",container:"#main",show:"custom",cache:!0,storage:!0,titleSuffix:"" - "+site_title,filter:function(t){var e="!1;return" t="=base_url||t+"/"==base_url?e=!1:0!=t.indexOf("#")&&0!=t.indexOf("/")&&-1==t.indexOf(base_url)?e=!0:("#"==t||t.indexOf(".png")">-1||t.indexOf(".jpg")>-1||t.indexOf(".gif")>-1||t.indexOf(".rar")>-1||t.indexOf(".zip")>-1||t.indexOf(".7z")>-1||t.indexOf(".xml")>-1)&&(e=!0),e&&"#"!=t&&window.open(t),e},callback:function(t){var e=t.type;switch(e){case"cache":old_friend();case"success":window.DUOSHUO&&(window.DUOSHUO=null),$(".ds-thread").is(":visible")&&!function(){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src="http://static.duoshuo.com/embed.js",t.charset="UTF-8",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(t)}();break;case"hash":break;case"error":$("#loading").html('&#20986;&#38169;&#20102;&#65292;&#35831;&#37325;&#35797;。 <a href="'+t.url+'">&#30830;&#23450;</a>')}}}),$("#main").bind("pjax.start",function(){$("#loading").html('<i></i> &#21152;&#36733;&#20013;。。。 <a href="#" class="cancel">&#21462;&#28040;</a>'),$("#preloader").fadeIn()}),$("#main").bind("pjax.end",function(){$("#preloader").fadeOut()})}),$.extend($.pjax.showFx,{custom:function(t,e,o){t=t.split('id="main"')[1],t=t.substring(t.indexOf(">")+1);for(var a,n,i,r=1,l="";r>0;){for(a=t.split("")[0],n=0,i=a.indexOf("<div");-1!=i;)n++,i=a.indexof("<div",i+1);r=r+n-1,l=l+t.split("< div>")[0]+"",t=t.substring(t.indexOf("")+6)}var c=this;c.html(l),e&&e.call(c,t,o)}}),$('a,input[type="submit"],button[type="button"],object').bind("focus",function(){this.blur&&this.blur()}),$("body").append('<div id="jquery-things"><div id="gotop">^ TOP</div><div id="preloader"><div id="loading"></div></div></div>'),window.location.hostname!=host_name&&(location.hostname=host_name),$(document).ready(function(){$(window).scroll(function(){0!=$(this).scrollTop()?$("#gotop").fadeIn():$("#gotop").fadeOut()}),$("#gotop").click(function(){$("body,html").animate({scrollTop:0},800)}),$("#preloader").delegate(".cancel","click",function(t){t.preventDefault(),ajax_cancel()})});</div");-1!=i;)n++,i=a.indexof("<div",i+1);r=r+n-1,l=l+t.split("<></4&&(o.xhr.onreadystatechange=t.noop,o.xhr.abort()),void(o.xhr=t.ajax(o.options)))};var></\></title>